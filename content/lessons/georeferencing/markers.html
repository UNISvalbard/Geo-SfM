
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GCP tutorial &#8212; Geo-SfM Course</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/lessons/georeferencing/markers';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Automation" href="../automation/overview.html" />
    <link rel="prev" title="Exercise - learning the ropes of GCP and marker detection" href="exercise.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">Found this tutorial helpful? Please Star me <a href="https://github.com/UNISvalbard/Geo-SfM"> <img src="https://img.shields.io/github/stars/UNISvalbard/Geo-SfM"></a></div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../landing-page.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.gif" class="logo__image only-light" alt="Geo-SfM Course - Home"/>
    <script>document.write(`<img src="../../../_static/logo.gif" class="logo__image only-dark" alt="Geo-SfM Course - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../landing-page.html">
                    Welcome to Geo-SfM
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorial/sfm_photogrammetry.html">SfM photogrammetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/exercise1.html">Exercise - learning the ropes of SfM photogrammetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tutorial.html">Metashape Tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../small-objects/hss_overview.html">Small object SfM photogrammetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../small-objects/hss_lab_exercise.html">Exercise - Food for thought</a></li>
<li class="toctree-l1"><a class="reference internal" href="../small-objects/hss_field_exercise.html">Exercise - Digitising field samples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../small-objects/hss_tutorial.html">Foldio360 Tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 3</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Geo-referencing</a></li>
<li class="toctree-l1"><a class="reference internal" href="gcps.html">Ground control points (GCPs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercise.html">Exercise - learning the ropes of GCP and marker detection</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">GCP tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 4</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../automation/overview.html">Automation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automation/Batch.html">Batch-based processing through Metashape GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automation/python.html">Python-based standardised processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../suppl/python-snippets.html">Python-snippets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 5</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../geomodelling/geomodel_overview.html">Geomodelling overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geomodelling/geomodel_tutorial.html">Interpreting in Metashape</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geomodelling/arcgis_cheatsheet.html">Interpreting in ArcGIS Pro</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geomodelling/qgis_cheatsheet.html">Interpreting in QGIS</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Session 6</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../publish/intro.html">Publish 3D models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publish/sketchfab.html">Sketchfab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publish/v3geo.html">V3Geo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publish/results.html">Uploaded examples</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Suppl. dGNSS data processing</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://unisvalbard.github.io/gnss-compendium/readme.html">UNIS GNSS Compendium</a></li>
<li class="toctree-l1"><a class="reference internal" href="../suppl_dgnss/topodrone_ppk.html">Topodrone PPK</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/seismic_lab.html">Seismic lab (Signehamna)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/software.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../suppl/metadata_lists.html">Metadata templates for archiving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/zbiblio.html">Bibliography</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About Geo-SfM</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/cite.html">Cite Geo-SfM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">Changelog</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">External Links</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://unisvalbard.github.io/ebooks/">UNIS Compendium Portal</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/UNISvalbard/Geo-SfM" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UNISvalbard/Geo-SfM/edit/main/content/lessons/georeferencing/markers.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UNISvalbard/Geo-SfM/issues/new?title=Issue%20on%20page%20%2Fcontent/lessons/georeferencing/markers.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/lessons/georeferencing/markers.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>GCP tutorial</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-generation-and-detection">GCP generation and detection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#real-world-coordinates">Real world coordinates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#agisoft-metashape">Agisoft Metashape</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aruco">ArUco</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-detection">GCP detection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-detection">Manual detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automated-detection">Automated detection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metashape">Metashape</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">ArUco</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="gcp-tutorial">
<span id="georeferencing-tutorial"></span><h1>GCP tutorial<a class="headerlink" href="#gcp-tutorial" title="Link to this heading">#</a></h1>
<p>While other GCP marker types exist, we here focus on the use of either ArUco or Agisoft Metashape markers.
Both marker types are of the binary fiducial sort, and, in principal, machine readable.</p>
<section id="gcp-generation-and-detection">
<h2>GCP generation and detection<a class="headerlink" href="#gcp-generation-and-detection" title="Link to this heading">#</a></h2>
<p>Slight differences exist in the way both are generated and detected, with Metashape markers strongly relying on the Metashape GUI and ArUco markers being mostly programming-based.
Both, however, require well-established real world coordinates to be worth the effort.</p>
<div class="warning admonition">
<p class="admonition-title">Leave generated markers as-is</p>
<p>Most GCPs feature black-white markers.
It is important to not change the white background colour, nor to remove white or black borders.
These are needed for the automated detection of the markers, and are inherent to their correct functioning.</p>
</div>
<section id="real-world-coordinates">
<h3>Real world coordinates<a class="headerlink" href="#real-world-coordinates" title="Link to this heading">#</a></h3>
<p>As mentioned previously, real world coordinates should be measured consistently across all markers, i.e., always opt for the same measuring location and method of measurement.</p>
<p>Correct and systematic archiving of the locations is furthermore key to automisation later on.
As part of the standardised project environment, it is therefore encouraged to format all GCP IDs and their corresponding real world coordinates in the following manner:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">,</span><span class="mf">15.83193045</span><span class="p">,</span><span class="mf">78.33763246</span><span class="p">,</span><span class="mf">224.6672</span>
<span class="mi">2</span><span class="p">,</span><span class="mf">15.83061642</span><span class="p">,</span><span class="mf">78.33836842</span><span class="p">,</span><span class="mf">221.3598</span>
<span class="mi">3</span><span class="p">,</span><span class="mf">15.82920799</span><span class="p">,</span><span class="mf">78.3390649</span><span class="p">,</span><span class="mf">202.7514</span>
<span class="mi">4</span><span class="p">,</span><span class="mf">15.82944846</span><span class="p">,</span><span class="mf">78.33972477</span><span class="p">,</span><span class="mf">184.2172</span>
<span class="mi">5</span><span class="p">,</span><span class="mf">15.83092679</span><span class="p">,</span><span class="mf">78.33907352</span><span class="p">,</span><span class="mf">183.6924</span>
<span class="mi">6</span><span class="p">,</span><span class="mf">15.83094077</span><span class="p">,</span><span class="mf">78.33962431</span><span class="p">,</span><span class="mf">164.2002</span>
<span class="mi">7</span><span class="p">,</span><span class="mf">15.83085931</span><span class="p">,</span><span class="mf">78.34003023</span><span class="p">,</span><span class="mf">152.5401</span>
<span class="mi">8</span><span class="p">,</span><span class="mf">15.82992376</span><span class="p">,</span><span class="mf">78.34011196</span><span class="p">,</span><span class="mf">169.7791</span>
</pre></div>
</div>
<p>Herein the first column represents the GCP ID, followed by longitude, latitude, and altitude with the EPSG:4326 CRS.
Once completed, make sure to save the file as a comma-separated-value (csv) file with name <em>gcp_table.csv</em> in the expected directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="n">project_directory</span><span class="p">}</span>\<span class="n">data_directory</span>\<span class="n">gcps</span>\<span class="n">prepared</span>\<span class="n">gcp_table</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Correct GCP IDs and order</p>
<p>Always make sure the GCP numbers in the <em>gcp_table.csv</em> file correspond with the actual GCP IDs.
They should therefore always be unique (i.e., used only once).</p>
<p>Furthermore, be aware that the file uses longitude-latitude formatting as opposed to the common latitude-longitude order!</p>
</div>
</section>
<section id="agisoft-metashape">
<h3>Agisoft Metashape<a class="headerlink" href="#agisoft-metashape" title="Link to this heading">#</a></h3>
<figure class="align-default" id="meta-markers">
<img alt="../../../_images/meta_markers.png" src="../../../_images/meta_markers.png" />
<figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">Two Metashape markers generated with the parameters listed in <a class="reference internal" href="#metashape-markers"><span class="std std-numref">Fig. 47</span></a>.</span><a class="headerlink" href="#meta-markers" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>To generate Metashape GCP markers, proceed to <em>Tools/Markers/Print markers…</em> to open the  <a class="reference internal" href="#metashape-markers"><span class="std std-ref">Print Markers dialog</span></a>.
Multiple parameters can be set, including the <em>bit-encoding</em> of the marker (<em>Marker type</em>); the <em>Center point radius</em> of the centre dot; how many markers to include per  (<em>Targets per page</em>); and the <em>Font size</em>.</p>
<figure class="align-default" id="metashape-markers">
<img alt="../../../_images/metashape_markers.png" src="../../../_images/metashape_markers.png" />
<figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">Overview of the Metashape marker generation window.</span><a class="headerlink" href="#metashape-markers" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="warning admonition">
<p class="admonition-title">Centre dot size</p>
<p>When using Metashape markers, it is extremely important to chose an appropriate <em>Center point radius</em>, as it effectively determines the detectability of the marker.
When the centre dot is no longer visible, Metashape will have great difficulty in automatically detecting the marker.</p>
</div>
</section>
<section id="aruco">
<h3>ArUco<a class="headerlink" href="#aruco" title="Link to this heading">#</a></h3>
<p>While the Metashape markers are exported all at once, more freedom is given to the generation of <a class="reference internal" href="gcps.html#aruco-markers"><span class="std std-ref">ArUco markers</span></a>.
Multiple options exist, ranging from <a class="reference external" href="https://chev.me/arucogen/">online marker generators</a> to the use of the popular <a class="reference external" href="https://docs.opencv.org/master/d5/dae/tutorial_aruco_detection.html">OpenCV image processing suite</a>, featuring both c++ and Python implementations.</p>
<p>One can even generate the ArUco markers from within the iFrame below:</p>
<div>
<iframe title="Online ArUco generator" width="100%" src="https://chev.me/arucogen/"></iframe>
</div>
<p>Herein the <em>Dictionary</em> corresponds to the <em>bit-encoding</em> used by the Metashape markers.
It is slightly more intuitive, however, as the {No}x{No} indicates the number of rows and columns of the marker.
The <em>Marker ID</em> is a fixed identification number of a given marker within the same dictionary.
Keep in mind, however, that markers from different dictionaries may have the same <em>Marker ID</em>, yet will have very different features!
Finally, the <em>Marker size</em> determines the size of the marker.
Make sure to pick an acceptable size.</p>
<p>Why not give it a shot yourself, and see how the markers change whilst you change the parameters?</p>
<p>Finally, you can save the marker by clicking <em>open</em>, and printing it as a PDF.</p>
<div class="seealso admonition">
<p class="admonition-title">Programming approach</p>
<p>For those interested in using the programming approach, please read the <a class="reference external" href="https://docs.opencv.org/master/d5/dae/tutorial_aruco_detection.html">OpenCV image processing suite article</a> linked to above, as well as the example tutorial available at <a class="reference external" href="https://mecaruco2.readthedocs.io/en/latest/notebooks_rst/Aruco/aruco_basics.html">Scientific Python</a>.
This allows for far more freedom, including the automated generation of multiple markers in a circle as used for hand-sized sample digitisation.</p>
</div>
</section>
</section>
<section id="gcp-detection">
<h2>GCP detection<a class="headerlink" href="#gcp-detection" title="Link to this heading">#</a></h2>
<div class="warning admonition">
<p class="admonition-title">Compatible CRS</p>
<p>Always make sure to select a compatible CRS when dealing with markers.
For instance, using metric measurements while in a longitude latitude CRS will give rise to very funky scaling issues!
Probably wise to change the project or marker CRS to EPSG:9001 (<em>Local Coordinates (m)</em>) when dealing with metric measurements.
Do so by right-clicking the active chunk in the <em>Workspace</em>, and then select <em>Reference Settings…</em>.</p>
</div>
<section id="manual-detection">
<h3>Manual detection<a class="headerlink" href="#manual-detection" title="Link to this heading">#</a></h3>
<p>In order to manually detect GCPs, one first has to create a new Agisoft Metashape project and import all the taken images.
Then one can browse through the images and manually look through all the images for the GCP markers.
Once identified, proceed by right clicking on the point of interest to open the <a class="reference internal" href="#marker-dialog"><span class="std std-ref">marker dialog</span></a>.
Here, one can either place a new marker, or choose to place a previously-added marker.</p>
<figure class="align-default" id="marker-dialog">
<img alt="../../../_images/marker_dialog.png" src="../../../_images/marker_dialog.png" />
<figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">Dialog for adding or placing specific markers.
Be advised: one can only place specific markers after having added them previously.</span><a class="headerlink" href="#marker-dialog" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>When added, a <em>green</em> flag appears that can be moved around by <em>click-holding</em> the left mouse button.
This is especially useful for finetuning locations.</p>
<p>Once done, proceed to the <em>Reference panel</em> and find that the markers you added have been added to the project - albeit without real world positional values.
Also shown are the number of projections, accuracy and error, of which the latter two also remain blank.
Positional information can either be added directly into the <em>Reference</em> panel by double clicking one of the fields, as shown in <a class="reference internal" href="#metashape-reference-panel-markers"><span class="std std-numref">Fig. 49</span></a>, or by importing reference data.</p>
<figure class="align-default" id="metashape-reference-panel-markers">
<img alt="../../../_images/metashape_reference_panel_markers.gif" src="../../../_images/metashape_reference_panel_markers.gif" />
<figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">A marker with ID <em>point 1</em> has been added to the project.
Thusfar, no positional information is available, though the metadata shows that the marker has been identified in a single image (<em>Projections</em>).
Editing the GCP point data can be easily done by double clicking each of the fields.</span><a class="headerlink" href="#metashape-reference-panel-markers" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>Reference data is imported through the <a class="reference internal" href="#metashape-reference-import"><span class="std std-ref">dialog</span></a> opened by selecting <em>File/Import/Import Reference…</em>.
Make sure to select the correct <em>Coordinate System</em>, select <em>Comma</em> as the <em>Delimiter</em>, and select the appropriate <em>Columns</em> for the <em>Label</em>, <em>longitude</em>, <em>Latitude</em>, and <em>Altitude</em>.</p>
<figure class="align-default" id="metashape-reference-import">
<img alt="../../../_images/metashape_reference_import.png" src="../../../_images/metashape_reference_import.png" />
<figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">Importing reference data for the GCP marker positions.
Make sure to select the <em>gcp_table.csv</em> file when prompted.</span><a class="headerlink" href="#metashape-reference-import" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="warning admonition">
<p class="admonition-title">Matching labels</p>
<p>Make sure to double check and match all GCP IDs (=Labels) prior to importing.
Rename the picked Labels in the <em>Reference</em> panel prior to importing, if you have to!</p>
</div>
</section>
<section id="automated-detection">
<h3>Automated detection<a class="headerlink" href="#automated-detection" title="Link to this heading">#</a></h3>
<p>A more significant difference exists in the way both marker types are automatically detected.</p>
<section id="metashape">
<h4>Metashape<a class="headerlink" href="#metashape" title="Link to this heading">#</a></h4>
<p>In Metashape, the <a class="reference internal" href="#metashape-marker-detection"><span class="std std-ref">Marker Detection dialog</span></a> can be used to automatically detect the binary Metashape markers.
This dialog can be accessed through <em>Tools/Markers/Detect markers…</em>.
To optimise marker detection, it is advised to set the <em>Marker type</em> parameter equal to the bit-encoding selected during generation and leave the other parameters as-is before clicking OK to proceed.</p>
<figure class="align-default" id="metashape-marker-detection">
<img alt="../../../_images/metashape_marker_detection.png" src="../../../_images/metashape_marker_detection.png" />
<figcaption>
<p><span class="caption-number">Fig. 51 </span><span class="caption-text">Metashape GUI option for marker detection.</span><a class="headerlink" href="#metashape-marker-detection" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="id1">
<h4>ArUco<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<div class="warning admonition">
<p class="admonition-title">Python installation required</p>
<p>The following steps require the <a class="reference internal" href="../about/software.html#about-software-python"><span class="std std-ref">installation of Python and the automated metashape scripts</span></a>.</p>
</div>
<p>Prior to automated detection, we will have to configure a settings or parameter file for the <a class="reference internal" href="../automation/python.html#section-python"><span class="std std-ref">automated metashape scripts</span></a>.</p>
<p>Head over to the <a class="reference internal" href="../automation/python.html"><span class="std std-doc">tutorial</span></a> and put together a minimal working example (MWE) configuration consisting of:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../automation/python.html#section-python-minimalconf"><span class="std std-ref">minimal configuration parameters</span></a></p></li>
<li><p><a class="reference internal" href="../automation/python.html#section-python-additionalparam"><span class="std std-ref">Add photos</span></a></p></li>
<li><p><a class="reference internal" href="../automation/python.html#section-python-additionalparam"><span class="std std-ref">GCPs - detection</span></a></p></li>
<li><p><a class="reference internal" href="../automation/python.html#section-python-additionalparam"><span class="std std-ref">GCPs - add to project additional parameters</span></a></p></li>
</ul>
<p>Make sure to place this file in the <em>config directory</em> of the <a class="reference internal" href="../tutorial/tutorial.html#tutorial-standardised-environment"><span class="std std-ref">standardised project environment</span></a>.</p>
<p>Then proceed with the <a class="reference internal" href="../automation/python.html"><span class="std std-doc">Python tutorial</span></a> to subsequently add all images to the Metashape project; to detect the GCPs in all the images; to add the detected GCPs and corresponding real world coordinates to the Metashape project.</p>
</section>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/lessons/georeferencing"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="exercise.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Exercise - learning the ropes of GCP and marker detection</p>
      </div>
    </a>
    <a class="right-next"
       href="../automation/overview.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Automation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-generation-and-detection">GCP generation and detection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#real-world-coordinates">Real world coordinates</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#agisoft-metashape">Agisoft Metashape</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aruco">ArUco</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gcp-detection">GCP detection</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-detection">Manual detection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#automated-detection">Automated detection</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#metashape">Metashape</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">ArUco</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Peter Betlem, Nil Rodes and Contributors
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024 (CC-BY-NC except where otherwise stated).
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>